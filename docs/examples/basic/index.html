<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">

        <title>maximgb.re-state basic example</title>
        <link rel="stylesheet"
              href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.16.2/build/styles/default.min.css">

        <style>
         html, body {
             width: 100vw;
             height: 100vh;
             overflow: hidden;
             margin: 0;
         }
        </style>
    </head>
    <body>
        <div id="app-basic-example"></div>
        <div class="source">
            <pre><code class="clojure"> (ns ^:figwheel-hooks maximgb.re-state.example.basic
  (:require [re-frame.core :as rf]
            [reagent.core :as reagent]
            [maximgb.re-state.core :as rs]))


(rs/def-machine basic-machine {:id      :basic-machine
                               :initial :one
                               :states {:one   {:on {:click :two}}
                                        :two   {:on {:click :three}}
                                        :three {:on {:click :one}}}} )


(defn state-cycler []
  (let [controller (rs/interpreter-start! (rs/interpreter! basic-machine))
        state-sub (rs/isubscribe-state controller)]
    (fn []
      [:div
       "Current state is: "
       [:div {:style {:display :inline-block
                      :width "5em"}}
        @state-sub]
       [:button
        {:on-click #(rs/interpreter-send! controller :click)}
        "Next state"]])))


(defn ^:after-load -main []
  (reagent/render [:div
                   [:div "Style cycler component, press \"Next state\" button to cycle states."]
                   [state-cycler]]
                  (.getElementById js/document "app-basic-example")))


(.addEventListener js/window "load" -main) </code></pre>
        </div>
        <script src="./prod-main.js" type="text/javascript"></script>
        <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.16.2/build/highlight.min.js"></script>
        <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.16.2/build/languages/clojure.min.js"></script>
    </body>
</html>
