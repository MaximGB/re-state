<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">

        <title>%TITLE%</title>

        <link rel="stylesheet"
              href="//cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">

        <link rel="stylesheet"
              href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.16.2/build/styles/default.min.css">

    </head>
    <body>
        <h1 class="ui header">%TITLE%</h1>
        <div class="ui internally celled grid">
            <div class="row">
                <div id="app" class="eight wide column"></div>
                <h2 class="ui sub header">Example source:</h2>
                <div class="eight wide column">
                    <div id="source-dimmer" class="ui active inverted dimmer">
                        <div class="ui text loaded">Loading example source code</div>
                    </div>
                    <div id="source">
                        <pre><code class="clojure"></code></pre>
                    </div>
                </div>
            </div>
        </div>

        <script src="./prod-main.js" type="text/javascript"></script>
        <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.16.2/build/highlight.min.js"></script>
        <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.16.2/build/languages/clojure.min.js"></script>

        <script>
         var sourceDiv = document.getElementById('source'),
             sourceCode = document.querySelector('#source pre code'),
             sourceDimmer = document.getElementById('source-dimmer');

         function htmlEscape(text){
             return text.replace(/&/g, '&amp;').replace(/>/g, '&gt;').replace(/</g, '&lt;').replace(/"/g, '&quot;');
         }

         fetch('https://raw.githubusercontent.com/MaximGB/re-state/master/%EXAMPLE_CLJS%').then(
             function fetchSuccess(response) {
                 return response.text();
             }

             function fetchFailure() {
                 sourceDimmer.remove();
                 sourceCode.innerHTML = "Loading failed.";
             }).then(
                 function textSuccess(text) {
                     sourceCode.innerHTML = htmlEscape(text);
                     hljs.highlightBlock(sourceCode);
                 },
                 function textFailure() {
                     sourceDimmer.remove();
                     sourceCode.innerHTML = "Loading failed.";
                 }
             );
        </script>
    </body>
</html>
